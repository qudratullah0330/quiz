{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport React, { useState, useEffect } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport { AntDesign } from '@expo/vector-icons';\nimport { initializeApp } from 'firebase/app';\nimport { firebaseConfig } from \"../Components/Test\";\nimport { getAuth, onAuthStateChanged } from 'firebase/auth';\nimport { getDocs, getFirestore, doc, collection, where, query, deleteDoc } from 'firebase/firestore';\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport { onSnapshot } from 'firebase/firestore';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar app = initializeApp(firebaseConfig);\nvar db = getFirestore(app);\nvar auth = getAuth(app);\nexport default function Home(_ref) {\n  var navigation = _ref.navigation;\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    showNotes = _useState2[0],\n    setShowNotes = _useState2[1];\n  var _useState3 = useState(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    userUID = _useState4[0],\n    setUserUID = _useState4[1];\n  console.warn('/////', userUID);\n  var _useState5 = useState(['#a5bee6', '#bbe38d', '#c98de3', '#e38dc3']),\n    _useState6 = _slicedToArray(_useState5, 1),\n    cartColors = _useState6[0];\n  onAuthStateChanged(auth, function (user) {\n    if (user) {\n      setUserUID(user.uid);\n    } else {\n      setUserUID(null);\n    }\n  });\n  useEffect(function () {\n    if (userUID) {\n      var q = query(collection(db, `notes/${userUID}/user_notes`));\n      var unsubscribe = onSnapshot(q, function (querySnapshot) {\n        var notesData = [];\n        querySnapshot.forEach(function (doc) {\n          notesData.push(_objectSpread(_objectSpread({}, doc.data()), {}, {\n            id: doc.id\n          }));\n        });\n        setShowNotes(notesData);\n      });\n      return function () {\n        unsubscribe();\n      };\n    }\n  }, [userUID]);\n  var deleteDocument = function () {\n    var _ref2 = _asyncToGenerator(function* (collectionName, documentId) {\n      try {\n        var docRef = doc(db, `${collectionName}/${documentId}`);\n        yield deleteDoc(docRef);\n        console.log('Document deleted successfully');\n      } catch (error) {\n        console.error('Error deleting document: ', error);\n      }\n    });\n    return function deleteDocument(_x, _x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  return _jsxs(View, {\n    style: styles.AllViewStyle,\n    children: [_jsx(FlatList, {\n      data: showNotes,\n      keyExtractor: function keyExtractor(item) {\n        return item.id;\n      },\n      renderItem: function renderItem(_ref3) {\n        var item = _ref3.item,\n          index = _ref3.index;\n        return _jsxs(TouchableOpacity, {\n          onPress: function onPress() {\n            navigation.navigate('EditScreen', {\n              Data: item,\n              userUID: userUID\n            });\n          },\n          style: _objectSpread(_objectSpread({}, styles.CartView), {}, {\n            backgroundColor: cartColors[index % cartColors.length]\n          }),\n          children: [_jsx(Text, {\n            style: {\n              margin: 10\n            },\n            children: \"Time:11/23/12\"\n          }), _jsx(AntDesign, {\n            name: \"delete\",\n            size: 30,\n            color: \"red\",\n            onPress: function onPress() {\n              return deleteDocument(`notes/${userUID}/user_notes`, item.id);\n            }\n          }), _jsxs(Text, {\n            style: {\n              marginHorizontal: 20,\n              fontSize: 22,\n              fontWeight: 'bold'\n            },\n            children: [\"Title: \", item.title]\n          })]\n        });\n      },\n      showsVerticalScrollIndicator: false\n    }), _jsx(View, {\n      style: styles.plusIcon,\n      children: _jsx(AntDesign, {\n        name: \"plus\",\n        size: 50,\n        color: \"black\",\n        onPress: function onPress() {\n          return navigation.navigate('AddScreen', {\n            userUID: userUID\n          });\n        }\n      })\n    })]\n  });\n}\nvar styles = StyleSheet.create({\n  CartView: {\n    width: 300,\n    height: 150,\n    backgroundColor: 'pink',\n    borderRadius: 10,\n    margin: 11\n  },\n  AllViewStyle: {\n    flex: 1,\n    margin: 20,\n    alignItems: 'center'\n  },\n  plusIcon: {\n    flex: 1,\n    width: '100%',\n    marginRight: 30,\n    alignItems: 'flex-end',\n    justifyContent: 'flex-end',\n    position: 'absolute',\n    top: '90%'\n  }\n});","map":{"version":3,"names":["React","useState","useEffect","View","Text","StyleSheet","TouchableOpacity","AntDesign","initializeApp","firebaseConfig","getAuth","onAuthStateChanged","getDocs","getFirestore","doc","collection","where","query","deleteDoc","FlatList","onSnapshot","jsx","_jsx","jsxs","_jsxs","app","db","auth","Home","_ref","navigation","_useState","_useState2","_slicedToArray","showNotes","setShowNotes","_useState3","_useState4","userUID","setUserUID","console","warn","_useState5","_useState6","cartColors","user","uid","q","unsubscribe","querySnapshot","notesData","forEach","push","_objectSpread","data","id","deleteDocument","_ref2","_asyncToGenerator","collectionName","documentId","docRef","log","error","_x","_x2","apply","arguments","style","styles","AllViewStyle","children","keyExtractor","item","renderItem","_ref3","index","onPress","navigate","Data","CartView","backgroundColor","length","margin","name","size","color","marginHorizontal","fontSize","fontWeight","title","showsVerticalScrollIndicator","plusIcon","create","width","height","borderRadius","flex","alignItems","marginRight","justifyContent","position","top"],"sources":["E:/React native course video/Test/NotesApp/Screens/Home.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { View, Text, StyleSheet, TouchableOpacity } from 'react-native';\r\nimport { AntDesign } from '@expo/vector-icons';\r\nimport { initializeApp } from 'firebase/app';\r\nimport { firebaseConfig } from '../Components/Test';\r\nimport { getAuth, onAuthStateChanged } from 'firebase/auth';\r\nimport { getDocs, getFirestore,doc, collection, where, query,deleteDoc } from 'firebase/firestore';\r\nimport { FlatList } from 'react-native';\r\nimport {  onSnapshot } from 'firebase/firestore';\r\n\r\nconst app = initializeApp(firebaseConfig);\r\nconst db = getFirestore(app);\r\nconst auth = getAuth(app);\r\n\r\nexport default function Home({ navigation }) {\r\n  const [showNotes, setShowNotes] = useState([]);\r\n  const [userUID, setUserUID] = useState(null);\r\n\r\nconsole.warn('/////',userUID)\r\n  const [cartColors] = useState(['#a5bee6', '#bbe38d', '#c98de3', '#e38dc3']); // Add more colors as needed\r\n  // Use onAuthStateChanged to listen for authentication state changes\r\n  onAuthStateChanged(auth, (user) => {\r\n    if (user) {\r\n      // User is signed in; user.uid contains the UID of the authenticated user\r\n      setUserUID(user.uid);\r\n    } else {\r\n      // User is signed out\r\n      // Handle sign-out state if needed\r\n      setUserUID(null);\r\n    }\r\n  });\r\n  useEffect(() => {\r\n    if (userUID) {\r\n      const q = query(collection(db, `notes/${userUID}/user_notes`));\r\n  \r\n      const unsubscribe = onSnapshot(q, (querySnapshot) => {\r\n        const notesData = [];\r\n        querySnapshot.forEach((doc) => {\r\n          notesData.push({\r\n            ...doc.data(),\r\n            id: doc.id,\r\n          });\r\n        });\r\n        setShowNotes(notesData);\r\n      });\r\n  \r\n      return () => {\r\n        // This cleanup function will unsubscribe from the real-time updates\r\n        unsubscribe();\r\n      };\r\n    }\r\n  }, [userUID]);\r\n \r\n  const deleteDocument = async (collectionName, documentId) => {\r\n    try {\r\n      const docRef = doc(db, `${collectionName}/${documentId}`);\r\n      await deleteDoc(docRef);\r\n      console.log('Document deleted successfully');\r\n    } catch (error) {\r\n      console.error('Error deleting document: ', error);\r\n    }\r\n  };\r\n  \r\n  \r\n  \r\n  \r\n  return (\r\n    <View style={styles.AllViewStyle}>\r\n      <FlatList\r\n        data={showNotes}\r\n        keyExtractor={(item) => item.id}\r\n        renderItem={({ item,index }) => (\r\n          <TouchableOpacity\r\n            onPress={() => {navigation.navigate('EditScreen',{Data:item,\r\n              userUID:userUID\r\n            })}}\r\n            style={{ ...styles.CartView, backgroundColor: cartColors[index % cartColors.length] }}\r\n          >\r\n         <Text style={{ margin: 10 }}>Time:11/23/12</Text>\r\n         <AntDesign name='delete' size={30} color='red'\r\n          onPress={() => deleteDocument(`notes/${userUID}/user_notes`, item.id)} />\r\n\r\n            <Text style={{ marginHorizontal: 20, fontSize: 22, fontWeight: 'bold' }}>\r\n              Title: {item.title}\r\n            </Text>\r\n            \r\n          </TouchableOpacity>\r\n        )}\r\n        showsVerticalScrollIndicator={false}\r\n      />\r\n      <View style={styles.plusIcon}>\r\n        <AntDesign name='plus' size={50} color='black' onPress={() => navigation.navigate('AddScreen',{\r\n          userUID:userUID,\r\n      \r\n        })} />\r\n      </View>\r\n    </View>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  CartView: {\r\n    width: 300,\r\n    height: 150,\r\n    backgroundColor: 'pink',\r\n    borderRadius: 10,\r\n    margin: 11,\r\n  },\r\n  AllViewStyle: {\r\n    flex: 1,\r\n    margin: 20,\r\n    alignItems: 'center',\r\n  },\r\n  plusIcon: {\r\n    flex: 1,\r\n    width: '100%',\r\n    marginRight: 30,\r\n    alignItems: 'flex-end',\r\n    justifyContent: 'flex-end',\r\n    position: 'absolute',\r\n    top:'90%'\r\n  },\r\n});\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}